# Core API Requirements

## Core Interfaces

- REQ-CORE-004: PackageReader interface provides read-only package access [type: architectural]. [api_core.md#12-packagereader-interface](../tech_specs/api_core.md#12-packagereader-interface)
- REQ-CORE-005: PackageWriter interface provides package modification capabilities [type: architectural]. [api_core.md#13-packagewriter-interface](../tech_specs/api_core.md#13-packagewriter-interface)
- REQ-CORE-185: PackageReader contract defines read-only interface for opened packages [type: architectural]. [api_core.md#121-packagereader-contract](../tech_specs/api_core.md#121-packagereader-contract)
- REQ-CORE-186: Reader contract scope defines PackageReader method assumptions [type: architectural]. [api_core.md#1211-reader-contract-scope](../tech_specs/api_core.md#1211-reader-contract-scope)
- REQ-CORE-187: OpenPackage eager metadata load requires all package metadata to be loaded into memory [type: constraint]. [api_core.md#1212-openpackage-eager-metadata-load](../tech_specs/api_core.md#1212-openpackage-eager-metadata-load)
- REQ-CORE-188: Context usage defines when context.Context is required for PackageReader methods [type: architectural]. [api_core.md#02-context-integration](../tech_specs/api_core.md#02-context-integration) (Exception: also [api_core.md#1213-context-usage](../tech_specs/api_core.md#1213-context-usage) for coverage.)
- REQ-CORE-189: Code reuse requirement defines shared helper functions for operations with underlying functionality [type: architectural]. [api_core.md#1215-code-reuse-requirement](../tech_specs/api_core.md#1215-code-reuse-requirement)
- REQ-CORE-080: ReadFile cross-reference provides reference to lightweight header-only inspection [type: documentation-only] (documentation-only: cross-reference - DO NOT CREATE FEATURE FILE). [api_core.md#122-packagereaderreadfile-method](../tech_specs/api_core.md#122-packagereaderreadfile-method)
- REQ-CORE-081: NormalizePackagePath function normalizes package paths [type: architectural]. [api_core.md#121-normalizepackagepath-function](../tech_specs/api_core.md#121-normalizepackagepath-function), [api_core.md#1211-normalizepackagepath-error-handling](../tech_specs/api_core.md#1211-normalizepackagepath-error-handling), [api_core.md#1212-normalizepackagepath-return-value](../tech_specs/api_core.md#1212-normalizepackagepath-return-value)
- REQ-CORE-082: ToDisplayPath function converts stored paths to display paths [type: architectural]. [api_core.md#122-todisplaypath-function](../tech_specs/api_core.md#122-todisplaypath-function), [api_core.md#1221-todisplaypath-behavior](../tech_specs/api_core.md#1221-todisplaypath-behavior), [api_core.md#1222-todisplaypath-usage](../tech_specs/api_core.md#1222-todisplaypath-usage)
- REQ-CORE-083: Path validation defines invalid path conditions and validation rules [type: constraint]. [api_core.md#123-validatepackagepath-function](../tech_specs/api_core.md#123-validatepackagepath-function), [api_core.md#124-validatepathlength-function](../tech_specs/api_core.md#124-validatepathlength-function)
- REQ-CORE-084: ReadFile method contract defines read-only file reading interface [type: architectural]. [api_core.md#122-packagereaderreadfile-method](../tech_specs/api_core.md#122-packagereaderreadfile-method)
- REQ-CORE-006: Package interface exposes core package operations [type: architectural]. [api_core.md#11-package-interface](../tech_specs/api_core.md#11-package-interface)
- REQ-CORE-061: Package interface specification defines unified package operations combining reader and writer capabilities [type: architectural]. [api_core.md#11-package-interface](../tech_specs/api_core.md#11-package-interface)
- REQ-CORE-019: Core interfaces define package interface contracts [type: architectural]. [api_core.md#1-core-interfaces](../tech_specs/api_core.md#1-core-interfaces)
- REQ-CORE-047: PackageReader opened package contract defines reader scope [type: architectural]. [api_core.md#121-packagereader-contract](../tech_specs/api_core.md#121-packagereader-contract), [api_core.md#111-filepackage-struct](../tech_specs/api_core.md#111-filepackage-struct) (Exception: also [api_core.md#1111-filepackage-field-descriptions](../tech_specs/api_core.md#1111-filepackage-field-descriptions) for coverage.)
- REQ-CORE-048: OpenPackage eager metadata load loads all required metadata [type: constraint]. [api_core.md#121-packagereader-contract](../tech_specs/api_core.md#121-packagereader-contract)
- REQ-CORE-049: Package path semantics define package-internal path rules [type: constraint].
  [api_core.md#2-package-path-semantics](../tech_specs/api_core.md#2-package-path-semantics)
  [api_core.md#22-path-rules](../tech_specs/api_core.md#22-path-rules)
- REQ-CORE-190: Unicode normalization defines how paths are normalized before comparison and storage [type: constraint].
  [api_core.md#214-unicode-normalization](../tech_specs/api_core.md#214-unicode-normalization)
- REQ-CORE-191: Path length limits define maximum path size handling and warnings [type: constraint].
  [api_core.md#215-path-length-limits](../tech_specs/api_core.md#215-path-length-limits)
- REQ-CORE-192: Path normalization on storage defines canonical path normalization rules [type: constraint].
  [api_core.md#216-path-normalization-on-storage](../tech_specs/api_core.md#216-path-normalization-on-storage)
- REQ-CORE-193: Path display and extraction defines how stored paths are converted for display and extraction [type: constraint].
  [api_core.md#23-path-display-and-extraction](../tech_specs/api_core.md#23-path-display-and-extraction)
- REQ-CORE-057: All stored paths MUST have leading slash for full path references [type: constraint]. [api_core.md#212-leading-slash-requirement](../tech_specs/api_core.md#212-leading-slash-requirement)
- REQ-CORE-058: Input paths without leading slash are automatically prefixed during normalization [type: constraint]. [api_core.md#212-leading-slash-requirement](../tech_specs/api_core.md#212-leading-slash-requirement)
- REQ-CORE-059: Leading slash indicates package root, not OS filesystem root [type: constraint]. [api_core.md#212-leading-slash-requirement](../tech_specs/api_core.md#212-leading-slash-requirement)
- REQ-CORE-060: Display paths MUST strip leading slash before showing to end users [type: constraint]. [api_core.md#23-path-display-and-extraction](../tech_specs/api_core.md#23-path-display-and-extraction)
- REQ-CORE-050: ListFiles returns results sorted by PrimaryPath alphabetically [type: constraint]. [api_core.md#1233-packagereaderlistfiles-behavior](../tech_specs/api_core.md#1233-packagereaderlistfiles-behavior)
- REQ-CORE-051: ListFiles results are stable across calls when package state unchanged [type: constraint]. [api_core.md#1233-packagereaderlistfiles-behavior](../tech_specs/api_core.md#1233-packagereaderlistfiles-behavior)
- REQ-CORE-085: ListFiles purpose defines file information retrieval [type: architectural]. [api_core.md#123-packagereaderlistfiles-method](../tech_specs/api_core.md#123-packagereaderlistfiles-method)
- REQ-CORE-086: ListFiles parameters define pure in-memory operation [type: architectural]. [api_core.md#1231-packagereaderlistfiles-parameters](../tech_specs/api_core.md#1231-packagereaderlistfiles-parameters)
- REQ-CORE-087: ListFiles returns define sorted file information slice [type: architectural]. [api_core.md#1232-packagereaderlistfiles-returns](../tech_specs/api_core.md#1232-packagereaderlistfiles-returns)
- REQ-CORE-088: ListFiles behavior defines sorting, stability, and mutation handling [type: architectural]. [api_core.md#1233-packagereaderlistfiles-behavior](../tech_specs/api_core.md#1233-packagereaderlistfiles-behavior)
- REQ-CORE-089: ListFiles error conditions reference common error mapping table [type: architectural]. [api_core.md#1234-packagereaderlistfiles-error-conditions](../tech_specs/api_core.md#1234-packagereaderlistfiles-error-conditions)
- REQ-CORE-090: ListFiles concurrency defines safe concurrent access [type: architectural]. [api_core.md#1235-packagereaderlistfiles-concurrency](../tech_specs/api_core.md#1235-packagereaderlistfiles-concurrency)
- REQ-CORE-091: FileInfo usage patterns demonstrate common FileInfo operations [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#124-fileinfo-structure](../tech_specs/api_core.md#124-fileinfo-structure)
- REQ-CORE-092: Basic listing example demonstrates simple file listing [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1243-example---fileinfo-usage---basic-listing](../tech_specs/api_core.md#1243-example---fileinfo-usage---basic-listing)
- REQ-CORE-093: Filter by type example demonstrates type-based filtering [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1244-example---fileinfo-usage---filter-by-type](../tech_specs/api_core.md#1244-example---fileinfo-usage---filter-by-type)
- REQ-CORE-094: Find compressed files example demonstrates compression filtering [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1245-example---fileinfo-usage---find-compressed-files](../tech_specs/api_core.md#1245-example---fileinfo-usage---find-compressed-files)
- REQ-CORE-064: FileInfo structure provides lightweight file information for package contents [type: architectural]. [api_core.md#124-fileinfo-structure](../tech_specs/api_core.md#124-fileinfo-structure)
- REQ-CORE-065: FileInfo includes path identification fields for primary and all aliased paths [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-066: FileInfo includes file type identification with numeric type and human-readable name [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-067: FileInfo includes size information for both original and stored file sizes [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-068: FileInfo includes processing status indicators for compression and encryption [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-069: FileInfo includes content verification checksums for original and stored content [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-070: FileInfo includes multi-path support with PathCount field [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-071: FileInfo includes version tracking for file content and metadata changes [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-072: FileInfo includes metadata indicators for tag presence [type: constraint]. [api_core.md#1241-fileinfo-field-descriptions](../tech_specs/api_core.md#1241-fileinfo-field-descriptions)
- REQ-CORE-073: FileInfo balances comprehensiveness with performance for listing operations [type: architectural]. [api_core.md#1242-fileinfo-design-rationale](../tech_specs/api_core.md#1242-fileinfo-design-rationale)
- REQ-CORE-052: GetInfo returns lightweight package information [type: architectural]. [api_core.md#125-packagereadergetinfo-method](../tech_specs/api_core.md#125-packagereadergetinfo-method)
- REQ-CORE-053: GetMetadata returns comprehensive package metadata [type: architectural]. [api_core.md#126-packagereadergetmetadata-method](../tech_specs/api_core.md#126-packagereadergetmetadata-method)
- REQ-CORE-095: Calculate compression ratios example demonstrates compression ratio calculation [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1246-example---fileinfo-usage---calculate-compression-ratios](../tech_specs/api_core.md#1246-example---fileinfo-usage---calculate-compression-ratios)
- REQ-CORE-096: Check for duplicates example demonstrates deduplication by checksum [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1247-example---fileinfo-usage---check-for-duplicates](../tech_specs/api_core.md#1247-example---fileinfo-usage---check-for-duplicates)
- REQ-CORE-097: Verify content integrity example demonstrates checksum verification [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1248-example---fileinfo-usage---verify-content-integrity](../tech_specs/api_core.md#1248-example---fileinfo-usage---verify-content-integrity)
- REQ-CORE-098: Find files with multiple paths example demonstrates multi-path file detection [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1249-example---fileinfo-usage---find-files-with-multiple-paths](../tech_specs/api_core.md#1249-example---fileinfo-usage---find-files-with-multiple-paths)
- REQ-CORE-099: Collection example patterns demonstrate samber/lo usage for collection operations [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#12410-fileinfo-usage---collection-example-patterns](../tech_specs/api_core.md#12410-fileinfo-usage---collection-example-patterns)
- REQ-CORE-100: GetInfo purpose defines lightweight package information retrieval [type: architectural]. [api_core.md#125-packagereadergetinfo-method](../tech_specs/api_core.md#125-packagereadergetinfo-method)
- REQ-CORE-101: GetInfo parameters define pure in-memory operation [type: architectural]. [api_core.md#1251-packagereadergetinfo-parameters](../tech_specs/api_core.md#1251-packagereadergetinfo-parameters)
- REQ-CORE-102: GetInfo returns define lightweight package information structure [type: architectural]. [api_core.md#1252-packagereadergetinfo-returns](../tech_specs/api_core.md#1252-packagereadergetinfo-returns)
- REQ-CORE-103: GetInfo scope defines lightweight view without additional I/O [type: constraint]. [api_core.md#1253-packagereadergetinfo-scope](../tech_specs/api_core.md#1253-packagereadergetinfo-scope)
- REQ-CORE-104: PackageInfo contents define header-derived and computed package-level statistics [type: architectural]. [api_core.md#125-packagereadergetinfo-method](../tech_specs/api_core.md#125-packagereadergetinfo-method)
- REQ-CORE-105: GetInfo does not include individual FileEntry metadata or special metadata file contents [type: constraint]. [api_core.md#125-packagereadergetinfo-method](../tech_specs/api_core.md#125-packagereadergetinfo-method)
- REQ-CORE-106: GetInfo error conditions reference common error mapping table [type: architectural]. [api_core.md#1254-packagereadergetinfo-error-conditions](../tech_specs/api_core.md#1254-packagereadergetinfo-error-conditions)
- REQ-CORE-107: GetInfo concurrency defines safe concurrent access [type: architectural]. [api_core.md#1255-packagereadergetinfo-concurrency](../tech_specs/api_core.md#1255-packagereadergetinfo-concurrency)
- REQ-CORE-108: GetMetadata purpose defines comprehensive metadata retrieval [type: architectural]. [api_core.md#126-packagereadergetmetadata-method](../tech_specs/api_core.md#126-packagereadergetmetadata-method)
- REQ-CORE-109: GetMetadata parameters define pure in-memory operation [type: architectural]. [api_core.md#1261-packagereadergetmetadata-parameters](../tech_specs/api_core.md#1261-packagereadergetmetadata-parameters)
- REQ-CORE-110: GetMetadata returns define comprehensive package metadata structure [type: architectural]. [api_core.md#1262-packagereadergetmetadata-returns](../tech_specs/api_core.md#1262-packagereadergetmetadata-returns)
- REQ-CORE-111: GetMetadata scope defines full metadata view without additional I/O [type: constraint]. [api_core.md#1263-packagereadergetmetadata-scope](../tech_specs/api_core.md#1263-packagereadergetmetadata-scope)
- REQ-CORE-112: PackageMetadata contents reference PackageInfo structure definition [type: architectural]. [api_core.md#126-packagereadergetmetadata-method](../tech_specs/api_core.md#126-packagereadergetmetadata-method)
- REQ-CORE-113: GetMetadata serialization references package information methods [type: architectural]. [api_core.md#1264-packagereadergetmetadata-serialization](../tech_specs/api_core.md#1264-packagereadergetmetadata-serialization)
- REQ-CORE-114: GetMetadata error conditions define internal consistency failure handling [type: constraint]. [api_core.md#1265-packagereadergetmetadata-error-conditions](../tech_specs/api_core.md#1265-packagereadergetmetadata-error-conditions)
- REQ-CORE-115: GetMetadata concurrency defines safe concurrent access [type: architectural]. [api_core.md#1266-packagereadergetmetadata-concurrency](../tech_specs/api_core.md#1266-packagereadergetmetadata-concurrency)
- REQ-CORE-116: Validate method contract defines package validation interface [type: architectural]. [api_core.md#127-packagereadervalidate-method](../tech_specs/api_core.md#127-packagereadervalidate-method)
- REQ-CORE-117: Validate purpose defines package format, structure, and integrity validation [type: architectural]. [api_core.md#127-packagereadervalidate-method](../tech_specs/api_core.md#127-packagereadervalidate-method)
- REQ-CORE-118: Validate parameters define context for cancellation and timeout [type: architectural]. [api_core.md#1271-packagereadervalidate-parameters](../tech_specs/api_core.md#1271-packagereadervalidate-parameters)
- REQ-CORE-119: Validate returns define error return for validation failures [type: architectural]. [api_core.md#1272-packagereadervalidate-returns](../tech_specs/api_core.md#1272-packagereadervalidate-returns)
- REQ-CORE-120: Validate behavior defines validation process [type: architectural]. [api_core.md#1273-packagereadervalidate-behavior](../tech_specs/api_core.md#1273-packagereadervalidate-behavior)
- REQ-CORE-121: Validate error conditions reference common error mapping table [type: architectural]. [api_core.md#1274-packagereadervalidate-error-conditions](../tech_specs/api_core.md#1274-packagereadervalidate-error-conditions)
- REQ-CORE-122: Validate concurrency defines safe concurrent access [type: architectural]. [api_core.md#1275-packagereadervalidate-concurrency](../tech_specs/api_core.md#1275-packagereadervalidate-concurrency)
- REQ-CORE-123: Common error mapping table defines error mapping for all PackageReader methods [type: architectural]. [api_core.md#128-packagereader-common-error-mapping-table](../tech_specs/api_core.md#128-packagereader-common-error-mapping-table)
- REQ-CORE-124: Memory versus disk side effects define PackageWriter write operations [type: architectural]. [api_core.md#131-memory-versus-disk-side-effects](../tech_specs/api_core.md#131-memory-versus-disk-side-effects)
- REQ-CORE-125: Write operations define Write, SafeWrite, and FastWrite methods [type: architectural]. [api_core.md#1311-write-operations](../tech_specs/api_core.md#1311-write-operations)
- REQ-CORE-126: Write durability defines when changes are written to disk [type: constraint]. [api_core.md#1312-write-durability](../tech_specs/api_core.md#1312-write-durability)
- REQ-CORE-127: Target path configuration defines how package target path is configured [type: architectural]. [api_core.md#1313-writing---target-path-configuration](../tech_specs/api_core.md#1313-writing---target-path-configuration)
- REQ-CORE-128: File management operations define add and remove file operations [type: architectural]. [api_core.md#113-file-management-operations](../tech_specs/api_core.md#113-file-management-operations)
- REQ-CORE-129: Write method contract defines general write method interface [type: architectural]. [api_writing.md#533-packagewrite-method](../tech_specs/api_writing.md#533-packagewrite-method)
- REQ-CORE-130: Write purpose defines automatic write strategy selection [type: architectural]. [api_writing.md#3-write-strategy-selection](../tech_specs/api_writing.md#3-write-strategy-selection)
- REQ-CORE-131: Write parameters define context for cancellation and timeout [type: architectural]. [api_writing.md#533-packagewrite-method](../tech_specs/api_writing.md#533-packagewrite-method)
- REQ-CORE-132: Write returns define error return for write failures [type: architectural]. [api_writing.md#533-packagewrite-method](../tech_specs/api_writing.md#533-packagewrite-method)
- REQ-CORE-133: Write behavior defines automatic strategy selection and durability [type: architectural]. [api_writing.md#3-write-strategy-selection](../tech_specs/api_writing.md#3-write-strategy-selection), [api_writing.md#533-packagewrite-method](../tech_specs/api_writing.md#533-packagewrite-method)
- REQ-CORE-134: Write detailed behavior references write strategy selection [type: architectural]. [api_writing.md#3-write-strategy-selection](../tech_specs/api_writing.md#3-write-strategy-selection)
- REQ-CORE-135: Write error conditions reference common writer error mapping table [type: architectural]. [api_writing.md#57-error-handling](../tech_specs/api_writing.md#57-error-handling)
- REQ-CORE-136: Write concurrency defines not safe for concurrent calls [type: constraint]. [api_writing.md#1-safewrite---atomic-package-writing](../tech_specs/api_writing.md#1-safewrite---atomic-package-writing)
- REQ-CORE-137: SafeWrite method contract defines atomic write method interface [type: architectural]. [api_writing.md#11-packagesafewrite-method](../tech_specs/api_writing.md#11-packagesafewrite-method)
- REQ-CORE-138: SafeWrite purpose defines atomic write with temp file strategy [type: architectural]. [api_writing.md#1-safewrite---atomic-package-writing](../tech_specs/api_writing.md#1-safewrite---atomic-package-writing)
- REQ-CORE-139: SafeWrite parameters define context and overwrite flag [type: architectural]. [api_writing.md#11-packagesafewrite-method](../tech_specs/api_writing.md#11-packagesafewrite-method)
- REQ-CORE-140: SafeWrite returns define error return for write failures [type: architectural]. [api_writing.md#11-packagesafewrite-method](../tech_specs/api_writing.md#11-packagesafewrite-method)
- REQ-CORE-141: SafeWrite behavior defines atomic write process [type: architectural]. [api_writing.md#12-safewrite-implementation-strategy](../tech_specs/api_writing.md#12-safewrite-implementation-strategy)
- REQ-CORE-142: SafeWrite detailed behavior references atomic package writing specification [type: architectural]. [api_writing.md#12-safewrite-implementation-strategy](../tech_specs/api_writing.md#12-safewrite-implementation-strategy)
- REQ-CORE-143: SafeWrite error conditions reference common writer error mapping table [type: architectural]. [api_writing.md#16-safewrite-error-handling](../tech_specs/api_writing.md#16-safewrite-error-handling)
- REQ-CORE-144: SafeWrite concurrency defines not safe for concurrent calls [type: constraint]. [api_writing.md#1-safewrite---atomic-package-writing](../tech_specs/api_writing.md#1-safewrite---atomic-package-writing)
- REQ-CORE-145: FastWrite method contract defines in-place update method interface [type: architectural]. [api_writing.md#21-packagefastwrite-method](../tech_specs/api_writing.md#21-packagefastwrite-method)
- REQ-CORE-146: FastWrite purpose defines in-place package updates [type: architectural]. [api_writing.md#2-fastwrite---in-place-package-updates](../tech_specs/api_writing.md#2-fastwrite---in-place-package-updates)
- REQ-CORE-147: FastWrite parameters define context for cancellation and timeout [type: architectural]. [api_writing.md#21-packagefastwrite-method](../tech_specs/api_writing.md#21-packagefastwrite-method)
- REQ-CORE-148: FastWrite returns define error return for write failures [type: architectural]. [api_writing.md#21-packagefastwrite-method](../tech_specs/api_writing.md#21-packagefastwrite-method)
- REQ-CORE-149: FastWrite method behavior defines in-place update process [type: architectural]. [api_writing.md#22-fastwrite-implementation-strategy](../tech_specs/api_writing.md#22-fastwrite-implementation-strategy)
- REQ-CORE-150: FastWrite detailed behavior references in-place package updates specification [type: architectural]. [api_writing.md#22-fastwrite-implementation-strategy](../tech_specs/api_writing.md#22-fastwrite-implementation-strategy)
- REQ-CORE-151: FastWrite error conditions reference common writer error mapping table [type: architectural]. [api_writing.md#25-fastwrite-error-handling](../tech_specs/api_writing.md#25-fastwrite-error-handling)
- REQ-CORE-152: FastWrite concurrency defines not safe for concurrent calls [type: constraint]. [api_writing.md#2-fastwrite---in-place-package-updates](../tech_specs/api_writing.md#2-fastwrite---in-place-package-updates)
- REQ-CORE-153: AddFileOptions precedence defines option precedence and path determination rules [type: architectural]. [api_file_mgmt_addition.md#26-addfileoptions-path-determination](../tech_specs/api_file_mgmt_addition.md#26-addfileoptions-path-determination), [api_file_mgmt_addition.md#28-addfileoptions-struct](../tech_specs/api_file_mgmt_addition.md#28-addfileoptions-struct)
- REQ-CORE-154: FastWrite path restriction requires target path to match currently opened package path [type: constraint]. [api_writing.md#22-fastwrite-implementation-strategy](../tech_specs/api_writing.md#22-fastwrite-implementation-strategy)
- REQ-CORE-155: SafeWrite configured path requirement writes to Package's configured target path [type: constraint]. [api_writing.md#12-safewrite-implementation-strategy](../tech_specs/api_writing.md#12-safewrite-implementation-strategy)
- REQ-CORE-156: Writing to a new path allows changing target path via SetTargetPath [type: architectural]. [api_writing.md#43-writing-signed-package-content-to-new-path](../tech_specs/api_writing.md#43-writing-signed-package-content-to-new-path), [api_basic_operations.md#8-packagesettargetpath-method](../tech_specs/api_basic_operations.md#8-packagesettargetpath-method)
- REQ-CORE-157: SafeWrite overwrite control requires overwrite flag for existing files [type: constraint]. [api_writing.md#11-packagesafewrite-method](../tech_specs/api_writing.md#11-packagesafewrite-method)
- REQ-CORE-158: FastWrite details define in-place update requirements [type: architectural]. [api_writing.md#2-fastwrite---in-place-package-updates](../tech_specs/api_writing.md#2-fastwrite---in-place-package-updates)
- REQ-CORE-159: Signed package overwrite restriction prevents overwriting signed packages [type: constraint]. [api_writing.md#44-signed-package-writing-error-conditions](../tech_specs/api_writing.md#44-signed-package-writing-error-conditions)
- REQ-CORE-160: Common writer error mapping table defines error mapping for all PackageWriter methods [type: architectural]. [api_core.md#132-common-writer-error-mapping-table](../tech_specs/api_core.md#132-common-writer-error-mapping-table)
- REQ-CORE-074: ReadFile purpose is to read file content from package as bytes. [api_core.md#122-packagereaderreadfile-method](../tech_specs/api_core.md#122-packagereaderreadfile-method)
- REQ-CORE-075: ReadFile parameters include context and path. [api_core.md#1221-packagereaderreadfile-parameters](../tech_specs/api_core.md#1221-packagereaderreadfile-parameters)
- REQ-CORE-076: ReadFile returns file content as byte slice. [api_core.md#1222-packagereaderreadfile-returns](../tech_specs/api_core.md#1222-packagereaderreadfile-returns)
- REQ-CORE-077: ReadFile behavior includes location, decompression, and decryption, and obeys encryption and validation. [api_core.md#1223-packagereaderreadfile-behavior](../tech_specs/api_core.md#1223-packagereaderreadfile-behavior)
- REQ-CORE-078: ReadFile error conditions handle missing files and processing errors. [api_core.md#1224-packagereaderreadfile-error-conditions](../tech_specs/api_core.md#1224-packagereaderreadfile-error-conditions)
- REQ-CORE-079: ReadFile is safe for concurrent reads from different goroutines. [api_core.md#1225-packagereaderreadfile-concurrency](../tech_specs/api_core.md#1225-packagereaderreadfile-concurrency)
- REQ-CORE-054: PackageWriter memory versus disk side effects are clearly defined [type: architectural]. [api_core.md#131-memory-versus-disk-side-effects](../tech_specs/api_core.md#131-memory-versus-disk-side-effects)
- ~~REQ-CORE-055: StageFile option precedence rules define option handling~~ [type: obsolete] (obsolete: StageFile replaced by AddFile/AddFileFromMemory high-level methods). [api_core.md#1273-stagefile-option-precedence](../tech_specs/api_core.md#1273-stagefile-option-precedence)
- REQ-CORE-056: Allowed target paths and overwrite behavior define write restrictions [type: constraint]. [api_writing.md#44-signed-package-writing-error-conditions](../tech_specs/api_writing.md#44-signed-package-writing-error-conditions)

## Version and Concurrency

- REQ-CORE-002: Concurrency primitives guard write operations [type: constraint]. [api_core.md#0-overview](../tech_specs/api_core.md#0-overview)
- REQ-CORE-003: Version returns semantic version plus spec version. [api_core.md#0-overview](../tech_specs/api_core.md#0-overview)

## Structured Error System

- REQ-CORE-001: All exported functions return structured errors [type: constraint]. [api_core.md#10-structured-error-system](../tech_specs/api_core.md#10-structured-error-system)
- REQ-CORE-010: Structured error system provides consistent error handling [type: architectural]. [api_core.md#10-structured-error-system](../tech_specs/api_core.md#10-structured-error-system)
- REQ-CORE-011: Error types and categories are defined consistently. [api_core.md#102-errortype-types-and-categories](../tech_specs/api_core.md#102-errortype-types-and-categories), [api_core.md#103-errortype-categories](../tech_specs/api_core.md#103-errortype-categories)
- REQ-CORE-020: PackageError structure provides error structure definition. [api_core.md#104-packageerror-structure](../tech_specs/api_core.md#104-packageerror-structure)
- REQ-CORE-021: Error helper functions provide error management utilities. [api_core.md#105-error-helper-functions](../tech_specs/api_core.md#105-error-helper-functions)
- REQ-CORE-022: Error handling patterns define recommended error handling [type: documentation-only]. [api_core.md#10511-error-wrapping-patterns](../tech_specs/api_core.md#10511-error-wrapping-patterns)
- REQ-CORE-023: Creating structured errors supports error creation. [api_core.md#1057-example---creating-errors-with-context](../tech_specs/api_core.md#1057-example---creating-errors-with-context)
- REQ-CORE-024: Error inspection and handling provide error examination methods. [api_core.md#1058-example---error-inspection-and-handling](../tech_specs/api_core.md#1058-example---error-inspection-and-handling)
- REQ-CORE-025: Error propagation defines error forwarding patterns. [api_core.md#1059-example---error-propagation](../tech_specs/api_core.md#1059-example---error-propagation), [api_core.md#10510-error-example-pattern](../tech_specs/api_core.md#10510-error-example-pattern)
- REQ-CORE-026: Sentinel error compatibility provides legacy error support. [api_core.md#10511-error-wrapping-patterns](../tech_specs/api_core.md#10511-error-wrapping-patterns)
- REQ-CORE-027: Error logging and debugging support error diagnostics. [api_core.md#10512-error-logging-and-debugging](../tech_specs/api_core.md#10512-error-logging-and-debugging)
- REQ-CORE-028: Migration from sentinel errors guides error system migration [type: documentation-only] (documentation-only: section removed from api_core.md - DO NOT CREATE FEATURE FILE). [api_core.md#10511-error-wrapping-patterns](../tech_specs/api_core.md#10511-error-wrapping-patterns)
- REQ-CORE-062: Structured error system provides consistent error handling across all package operations [type: architectural]. [api_core.md#10-structured-error-system](../tech_specs/api_core.md#10-structured-error-system)
- REQ-CORE-045: Benefits of structured errors document error system advantages [type: documentation-only]. [api_core.md#101-benefits-of-structured-errors](../tech_specs/api_core.md#101-benefits-of-structured-errors)
- REQ-CORE-046: Error type categories define error classification system. [api_core.md#103-errortype-categories](../tech_specs/api_core.md#103-errortype-categories)
- REQ-CORE-161: PackageError type definition defines structured error structure [type: architectural]. [api_core.md#104-packageerror-structure](../tech_specs/api_core.md#104-packageerror-structure)
- REQ-CORE-162: PackageError Error method implements error interface [type: architectural]. [api_core.md#1041-packageerrorerror-method](../tech_specs/api_core.md#1041-packageerrorerror-method)
- REQ-CORE-163: PackageError Unwrap method returns underlying error for error unwrapping [type: architectural]. [api_core.md#1042-packageerrorunwrap-method](../tech_specs/api_core.md#1042-packageerrorunwrap-method)
- REQ-CORE-164: PackageError Is method implements error matching for error comparison [type: architectural]. [api_core.md#1043-packageerroris-method](../tech_specs/api_core.md#1043-packageerroris-method)
- REQ-CORE-165: Error creation functions provide NewPackageError and WrapErrorWithContext [type: architectural]. [api_core.md#1051-newpackageerror-function](../tech_specs/api_core.md#1051-newpackageerror-function), [api_core.md#1052-wraperrorwithcontext-function](../tech_specs/api_core.md#1052-wraperrorwithcontext-function)
- REQ-CORE-166: NewPackageError function creates structured error with type-safe context [type: architectural]. [api_core.md#1051-newpackageerror-function](../tech_specs/api_core.md#1051-newpackageerror-function)
- REQ-CORE-167: WrapErrorWithContext function wraps error with type-safe context [type: architectural]. [api_core.md#1052-wraperrorwithcontext-function](../tech_specs/api_core.md#1052-wraperrorwithcontext-function)
- REQ-CORE-168: Error query functions provide AsPackageError and GetErrorContext [type: architectural]. [api_core.md#1053-aspackageerror-function](../tech_specs/api_core.md#1053-aspackageerror-function), [api_core.md#1054-geterrorcontext-function](../tech_specs/api_core.md#1054-geterrorcontext-function)
- REQ-CORE-169: AsPackageError function checks if error is PackageError [type: architectural]. [api_core.md#1053-aspackageerror-function](../tech_specs/api_core.md#1053-aspackageerror-function)
- REQ-CORE-170: GetErrorContext function retrieves type-safe context from errors [type: architectural]. [api_core.md#1054-geterrorcontext-function](../tech_specs/api_core.md#1054-geterrorcontext-function)
- REQ-CORE-171: Error context functions provide AddErrorContext for type-safe context [type: architectural]. [api_core.md#1055-adderrorcontext-function](../tech_specs/api_core.md#1055-adderrorcontext-function)
- REQ-CORE-172: Error transformation functions provide MapError for error transformation [type: architectural]. [api_core.md#1056-maperror-function](../tech_specs/api_core.md#1056-maperror-function)
- REQ-CORE-173: Error context type definitions define typed error context structures [type: architectural]. [api_core.md#1057-example---creating-errors-with-context](../tech_specs/api_core.md#1057-example---creating-errors-with-context)
- REQ-CORE-174: FileErrorContext structure defines error context for file operations [type: architectural]. [api_core.md#1057-example---creating-errors-with-context](../tech_specs/api_core.md#1057-example---creating-errors-with-context)
- REQ-CORE-175: BasicErrorContext structure defines minimal error context [type: architectural]. [api_core.md#1057-example---creating-errors-with-context](../tech_specs/api_core.md#1057-example---creating-errors-with-context)
- REQ-CORE-176: Creating errors with context demonstrates structured error creation with typed context [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1057-example---creating-errors-with-context](../tech_specs/api_core.md#1057-example---creating-errors-with-context)
- REQ-CORE-177: Error wrapping patterns example demonstrates error wrapping with typed context [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#10511-error-wrapping-patterns](../tech_specs/api_core.md#10511-error-wrapping-patterns)
- REQ-CORE-178: Error logging pattern example demonstrates structured error logging [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#10512-error-logging-and-debugging](../tech_specs/api_core.md#10512-error-logging-and-debugging)
- REQ-CORE-179: Type-safe context retrieval example demonstrates typed context extraction [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1054-geterrorcontext-function](../tech_specs/api_core.md#1054-geterrorcontext-function)
- REQ-CORE-180: Error transformation example demonstrates error context transformation [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1056-maperror-function](../tech_specs/api_core.md#1056-maperror-function)
- REQ-CORE-181: OldContext structure defines source context for error transformation [type: architectural]. [api_core.md#1056-maperror-function](../tech_specs/api_core.md#1056-maperror-function)
- REQ-CORE-182: NewContext structure defines target context for error transformation [type: architectural]. [api_core.md#1056-maperror-function](../tech_specs/api_core.md#1056-maperror-function)
- REQ-CORE-183: Transformation usage demonstrates error context transformation with MapError [type: documentation-only] (documentation-only: examples - DO NOT CREATE FEATURE FILE). [api_core.md#1056-maperror-function](../tech_specs/api_core.md#1056-maperror-function)
- REQ-CORE-184: PackageWriter structured error system uses structured errors exclusively for all PackageWriter methods [type: architectural]. [api_core.md#10-structured-error-system](../tech_specs/api_core.md#10-structured-error-system)

## Context Integration

- REQ-CORE-015: Methods performing I/O operations, network calls, or long-running operations accept context.Context as first parameter [type: constraint]. [api_core.md#02-context-integration](../tech_specs/api_core.md#02-context-integration)
- REQ-CORE-016: Context cancellation must be checked and respected in operations that accept context [type: constraint]. [api_core.md#02-context-integration](../tech_specs/api_core.md#02-context-integration)
- REQ-CORE-017: Context timeout errors returned as structured context errors. [api_core.md#02-context-integration](../tech_specs/api_core.md#02-context-integration)

## Package Compression

- REQ-CORE-007: Package compression operations are accessible. [api_core.md#6-package-compression-operations](../tech_specs/api_core.md#6-package-compression-operations)
- REQ-CORE-008: Package compression types are defined and queryable. [api_package_compression.md#12-compression-types](../tech_specs/api_package_compression.md#12-compression-types)
- REQ-CORE-030: Basic operations define core package operations [type: architectural]. [api_core.md#112-basic-operations](../tech_specs/api_core.md#112-basic-operations)
- REQ-CORE-038: Package compression functions provide compression operations. [api_package_compression.md#4-in-memory-compression-methods](../tech_specs/api_package_compression.md#4-in-memory-compression-methods)
- REQ-CORE-039: Package compression behavior defines compression process. [api_package_compression.md#1-package-compression-overview](../tech_specs/api_package_compression.md#1-package-compression-overview)

## Write Protection

- REQ-CORE-009: Write protection prevents modification after signing [type: constraint]. [api_core.md#72-write-protection-and-immutability-enforcement](../tech_specs/api_core.md#72-write-protection-and-immutability-enforcement)

## Signing and Compression Relationship

- REQ-CORE-034: Signing and compression relationship defines interaction rules [type: architectural]. [api_writing.md#54-compression-and-signing-relationship](../tech_specs/api_writing.md#54-compression-and-signing-relationship)
- REQ-CORE-035: Supported operations define allowed combinations [type: constraint]. [api_writing.md#541-signing-compressed-packages](../tech_specs/api_writing.md#541-signing-compressed-packages)
- REQ-CORE-036: Unsupported operations define prohibited combinations [type: constraint]. [api_writing.md#542-compressing-signed-packages](../tech_specs/api_writing.md#542-compressing-signed-packages)
- REQ-CORE-037: Error handling defines operation error management. [api_writing.md#57-error-handling](../tech_specs/api_writing.md#57-error-handling)

## Digital Signatures

- REQ-CORE-040: Digital signatures and security define signature capabilities [type: architectural]. [api_core.md#7-digital-signatures-and-security](../tech_specs/api_core.md#7-digital-signatures-and-security)
- REQ-CORE-041: Core integration points define signature integration [type: architectural]. [api_core.md#71-core-integration-points](../tech_specs/api_core.md#71-core-integration-points)

## Metadata Management

- REQ-CORE-012: Per-file tags management supports metadata tagging. [api_file_management.md#13-tag-management](../tech_specs/api_file_mgmt_file_entry.md)
- REQ-CORE-013: Package metadata management is accessible. [api_core.md#8-package-metadata-management](../tech_specs/api_core.md#8-package-metadata-management)
- REQ-CORE-032: File management defines file operation capabilities [type: architectural]. [api_core.md#4-file-management](../tech_specs/api_core.md#4-file-management)
- REQ-CORE-033: Encryption management defines encryption capabilities [type: architectural]. [api_core.md#5-encryption-management](../tech_specs/api_core.md#5-encryption-management)
- REQ-CORE-042: General metadata operations provide metadata access. [api_core.md#81-general-metadata-operations](../tech_specs/api_core.md#81-general-metadata-operations)
- REQ-CORE-043: AppID/VendorID management provides identifier operations. [api_core.md#82-appidvendorid-management](../tech_specs/api_core.md#82-appidvendorid-management)
- REQ-CORE-044: Package information structures provide information access. [api_core.md#83-package-information-structures](../tech_specs/api_core.md#83-package-information-structures)

## File Validation

- REQ-CORE-014: File validation requirements are enforced [type: constraint]. [api_core.md#9-file-validation-requirements](../tech_specs/api_core.md#9-file-validation-requirements)
- REQ-CORE-018: Input parameters validated before processing with clear error messages [type: constraint]. [api_core.md#9-file-validation-requirements](../tech_specs/api_core.md#9-file-validation-requirements)

## Generic Types

- REQ-CORE-029: Generic types provide type-safe generic support [type: architectural]. [api_core.md#11-generic-types](../tech_specs/api_core.md#11-generic-types)
- REQ-CORE-063: Core generic types define foundational generic type abstractions used throughout the API [type: architectural]. [api_generics.md#1-core-generic-types](../tech_specs/api_generics.md#1-core-generic-types)

## Package Writing Operations

- REQ-CORE-031: Package writing operations define write capabilities [type: architectural]. [api_core.md#3-package-writing-operations](../tech_specs/api_core.md#3-package-writing-operations)
